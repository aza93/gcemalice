<?php

namespace ExploitBundle\Repository;


/**
 * PostRepository
 *
 * This class was generated by the Doctrine ORM. Add your own custom
 * repository methods below.
 */
class PostRepository extends \Doctrine\ORM\EntityRepository
{
    public function updateStatut($id, $numstatut)
    {
        return $this->getEntityManager()
            ->createQuery(

                "UPDATE ExploitBundle:Post p SET  p.statut = $numstatut WHERE p.id = $id"
            )->execute();
    }

    public function findStatut($id, $stat)
    {
        $statut =$this->createQueryBuilder('a')
            ->where('a.id = :id')
            ->andWhere('a.statut = :statut')
            ->setParameter('id', $id)
            ->setParameter('statut', $stat)
            ->getQuery()->execute();

        return $statut;
    }

    public function tableGceInteg($sequence = null)
    {
        $statut =$this->createQueryBuilder('a')
            ->Where('a.sequence = :sequence')
            ->setParameter('sequence', $sequence)
            ->getQuery()->execute();

        return $statut;
    }
}
